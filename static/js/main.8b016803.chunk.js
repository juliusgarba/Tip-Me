(this["webpackJsonpopen-tip"]=this["webpackJsonpopen-tip"]||[]).push([[0],{1009:function(e,t,n){},1013:function(e,t,n){},1016:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(61),r=n.n(c),s=(n(484),n(24)),i=n(54),l=n(22),o=n(475),u=n.n(o),d=(n(839),n(478)),b=n(35),j=n.n(b),p=n(7),f=n.p+"static/media/restaurant.ae46d8b0.jpg",h=n(143),m=n(84),O=n(33),x=(n(1009),n(3)),v=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],r=n[1],o=Object(a.useState)(""),u=Object(l.a)(o,2),d=u[0],b=u[1],j=Object(a.useState)(""),f=Object(l.a)(j,2),v=f[0],g=f[1],y=Object(a.useState)(0),w=Object(l.a)(y,2),k=w[0],N=w[1],T=Object(a.useState)(!0),C=Object(l.a)(T,2),S=C[0],A=C[1],W=function(){var t=Object(i.a)(Object(s.a)().mark((function t(n){var a;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.includes(c)){t.next=6;break}return g(""),A(!1),t.abrupt("return");case 6:return A(!0),t.next=9,e.checkAddress(c);case 9:a=t.sent,g(a);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(x.jsxs)(m.a,Object(p.a)(Object(p.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(x.jsx)(m.a.Header,{children:Object(x.jsx)(m.a.Title,{id:"contained-modal-title-vcenter",children:"Tip a staff"})}),Object(x.jsx)(m.a.Body,{children:Object(x.jsxs)(O.a,{children:[Object(x.jsxs)(O.a.Group,{className:"mb-3",controlId:"formUniqueIdentifier",children:[Object(x.jsxs)(O.a.Group,{className:"mb-3",controlId:"formMessage",children:[Object(x.jsx)(O.a.Label,{children:"Message"}),Object(x.jsx)(O.a.Control,{as:"textarea",rows:3,value:d,onChange:function(e){return b(e.target.value)}})]}),Object(x.jsx)(O.a.Label,{children:"Enter staff wallet identifier"}),Object(x.jsx)(O.a.Control,{type:"text",placeholder:"e.g alice.dac",value:c,onChange:function(e){return r(e.target.value)}}),Object(x.jsx)(h.a,{onClick:function(){return W(e.namesTaken)},children:"Check"}),Object(x.jsx)("div",{className:"check-avail check-avail-f",hidden:S,children:"Invalid wallet identifier"})]}),Object(x.jsxs)(O.a.Group,{className:"mb-3",controlId:"formWalletAddress",children:[Object(x.jsx)(O.a.Label,{children:"Wallet Address"}),Object(x.jsx)(O.a.Control,{type:"text",disabled:!0,value:v})]}),Object(x.jsxs)(O.a.Group,{className:"mb-3",controlId:"formAmount",children:[Object(x.jsx)(O.a.Label,{children:"Amount (CELO)"}),Object(x.jsx)(O.a.Control,{type:"text",value:k,onChange:function(e){return N(e.target.value)}})]}),Object(x.jsx)(h.a,{onClick:e.onHide,children:"Close"}),Object(x.jsx)(h.a,{variant:"primary",onClick:Object(i.a)(Object(s.a)().mark((function t(){return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.tip(d,c,v,k));case 1:case"end":return t.stop()}}),t)}))),children:"Tip"})]})})]}))},g=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(l.a)(s,2),o=i[0],u=(i[1],Object(a.useState)(!0)),d=Object(l.a)(u,2),b=d[0],j=d[1];return Object(a.useEffect)((function(){!function(){var t=c+".dac",n=e.namesTaken;null!==n&&void 0!==n&&n.includes(t)?j(!1):j(!0)}()}),[c]),Object(x.jsxs)(m.a,Object(p.a)(Object(p.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(x.jsx)(m.a.Header,{children:Object(x.jsx)(m.a.Title,{id:"contained-modal-title-vcenter",children:"Register as a staff"})}),Object(x.jsx)(m.a.Body,{children:Object(x.jsxs)(O.a,{children:[Object(x.jsxs)(O.a.Group,{className:"mb-3",controlId:"formUniqueIdentifier",children:[Object(x.jsx)(O.a.Label,{children:"Enter your unique identifier"}),Object(x.jsx)(O.a.Control,{type:"text",placeholder:"e.g alice",value:c,onChange:function(e){return r(e.target.value)}}),Object(x.jsxs)(O.a.Text,{className:"text-muted",children:['Your unique identifier will be append with a ".dac" extension. Example, ',Object(x.jsx)("span",{className:"form-highlight",children:"alice"})," will resolve to ",Object(x.jsx)("span",{className:"form-highlight",children:"alice.dac"})]}),Object(x.jsxs)("div",{className:"check-avail check-avail-f",hidden:b||!c,children:['"',c,'.dac" is already taken']}),Object(x.jsxs)("div",{className:"check-avail check-avail-s",hidden:!b||!c,children:['"',c,'.dac" is available']})]}),Object(x.jsxs)(O.a.Group,{className:"mb-3",controlId:"formWalletAddress",children:[Object(x.jsx)(O.a.Label,{children:"Your wallet Address"}),Object(x.jsx)(O.a.Control,{type:"text",value:e.userWallet,disabled:!0})]}),Object(x.jsx)(h.a,{onClick:e.onHide,children:"Close"}),Object(x.jsx)(h.a,{variant:"primary",type:"button",onClick:function(){return e.register(c,o)},children:"Register"})]})})]}))},y=function(e){var t=e.bal,n=e.namesTaken,c=e.register,r=e.tip,s=e.checkAddress,i=e.userWallet,o=Object(a.useState)(!1),u=Object(l.a)(o,2),d=u[0],b=u[1],j=Object(a.useState)(!1),p=Object(l.a)(j,2),h=p[0],m=p[1];return Object(x.jsx)(x.Fragment,{children:n.length?Object(x.jsxs)("div",{className:"home",children:[Object(x.jsx)("img",{className:"bg-img",src:f}),Object(x.jsxs)("div",{className:"balance",children:["Balance: ",t," CELO"]}),Object(x.jsxs)("div",{className:"home-body",children:[Object(x.jsx)("div",{className:"home-welcome-msg",children:"Welcome to the world's first decentralised restaurant"}),Object(x.jsx)("div",{className:"home-ques",children:"What would you like to do?"}),Object(x.jsxs)("div",{className:"home-btns",children:[Object(x.jsx)(v,{show:d,onHide:function(){return b(!1)},namesTaken:n,checkAddress:s,tip:r}),Object(x.jsx)("button",{className:"home-btn",onClick:function(){return b(!0)},children:"Tip"}),Object(x.jsx)(g,{show:h,onHide:function(){return m(!1)},namesTaken:n,register:c,userWallet:i}),Object(x.jsx)("button",{className:"home-btn",onClick:function(){return m(!0)},children:"Register"})]})]})]}):Object(x.jsx)("div",{children:"Connecting to contract..."})})},w=(n(1013),function(e){var t=e.tips;return Object(x.jsxs)("div",{className:"staff",children:[Object(x.jsx)("div",{className:"staff-heading",children:"Staff Notification panel"}),t&&Object(x.jsx)("div",{children:t.length>0?Object(x.jsxs)(x.Fragment,{children:[" ",null===t||void 0===t?void 0:t.map((function(e){return Object(x.jsxs)("div",{className:"notification",children:[Object(x.jsx)("span",{className:"noti-highlight",children:e.sender})," sent you"," ",Object(x.jsxs)("span",{className:"noti-highlight",children:[new j.a(e.amount).shiftedBy(-18).toString()," CELO"]})," ",'with message "',Object(x.jsx)("span",{className:"noti-highlight",children:e.message}),'" on'," ",Object(x.jsx)("span",{className:"noti-highlight",children:new Date(Number(1e3*e.timeStamp)).toUTCString()})]})}))]}):Object(x.jsx)("div",{children:"No tips"})})]})}),k=n(479);var N=function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(0),o=Object(l.a)(r,2),b=o[0],p=o[1],f=Object(a.useState)(),h=Object(l.a)(f,2),m=h[0],O=h[1],v=Object(a.useState)(),g=Object(l.a)(v,2),N=g[0],T=g[1],C=Object(a.useState)([]),S=Object(l.a)(C,2),A=S[0],W=S[1],E=Object(a.useState)(null),I=Object(l.a)(E,2),L=I[0],M=I[1],B=Object(a.useState)(null),F=Object(l.a)(B,2),_=F[0],G=F[1];Object(a.useEffect)((function(){H()}),[]),Object(a.useEffect)((function(){n&&m&&P()}),[n,m]),Object(a.useEffect)((function(){N&&(R(),Y())}),[N]),Object(a.useEffect)((function(){m&&N&&U()}),[N,m]);var H=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){var t,n,a,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.celo){e.next=20;break}return e.prev=1,e.next=4,window.celo.enable();case 4:return t=new u.a(window.celo),n=Object(d.newKitFromWeb3)(t),e.next=8,n.web3.eth.getAccounts();case 8:a=e.sent,r=a[0],n.defaultAccount=r,c(n),O(r),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0);case 18:e.next=21;break;case 20:alert("You need to install the celo wallet extension in order to use this app");case 21:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){var t,a,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getTotalBalance(m);case 3:t=e.sent,a=t.CELO.shiftedBy(-18).toFixed(2),c=new n.web3.eth.Contract(k,"0xf2E2613d32E006ea3f300A76d69b972bf662A929"),T(c),p(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(Object(s.a)().mark((function e(){var t,n,a,c,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.methods.readMyTips().call();case 2:t=e.sent,n=[],a=Object(s.a)().mark((function e(a){var c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(){var e=Object(i.a)(Object(s.a)().mark((function e(n){var c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.methods.readTip(t[a]).call();case 2:c=e.sent,n({message:c[0],amount:c[1],sender:c[2],timeStamp:c[3]});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:c=e.sent,n.push(c);case 4:case"end":return e.stop()}}),e)})),c=0;case 6:if(!(c<t.length)){e.next=11;break}return e.delegateYield(a(c),"t0",8);case 8:c++,e.next=6;break;case 11:return e.next=13,Promise.all(n);case 13:r=e.sent,console.log(r.length),G(r);case 16:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:e.next=7;break;case 4:e.prev=4,e.t1=e.catch(0),console.log(e.t1);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){var n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}return n=t+".dac",e.prev=2,e.next=5,N.methods.createNewWallet(n,m).send({from:m});case 5:alert("Registration completed successfully"),window.location.reload(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:e.next=15;break;case 14:alert("Invalid details entered");case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.methods.readNamesTaken().call();case 3:t=e.sent,W(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t){var n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.methods.checkAddressWithName(t).call();case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(i.a)(Object(s.a)().mark((function e(t,n,a,c){var r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n&&a){e.next=4;break}alert("Please enter valid details and try again"),e.next=16;break;case 4:return console.log(t,n,a,c),r=new j.a(c).shiftedBy(18).toString(),e.prev=6,e.next=9,N.methods.tip(t,n,a).send({from:m,value:r});case 9:alert("You have tipped a staff successfully"),window.location.reload(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t,n,a,c){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(Object(s.a)().mark((function e(){var t,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.methods.checkNameWithAddress(m).call();case 3:return t=e.sent,e.next=6,N.methods.isStaff(t).call();case 6:n=e.sent,M(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)(x.Fragment,{children:null!==L?Object(x.jsx)("div",{className:"app",children:L?Object(x.jsx)(w,{tips:_}):Object(x.jsx)(y,{bal:b,namesTaken:A,register:q,tip:J,checkAddress:D,userWallet:m})}):Object(x.jsx)("div",{children:"Data loading. Please wait"})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1021)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};n(1014);r.a.render(Object(x.jsx)(N,{}),document.getElementById("root")),T()},479:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"_name","type":"string"}],"name":"checkAddressWithName","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"checkNameWithAddress","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"address","name":"_walletAddress","type":"address"}],"name":"createNewWallet","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_name","type":"string"}],"name":"isStaff","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"readMyTips","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"readNamesTaken","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tipId","type":"uint256"}],"name":"readTip","outputs":[{"internalType":"string","name":"message","type":"string"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"timeStamp","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_message","type":"string"},{"internalType":"string","name":"_name","type":"string"},{"internalType":"address","name":"_to","type":"address"}],"name":"tip","outputs":[],"stateMutability":"payable","type":"function"}]')},484:function(e,t,n){},499:function(e,t){},502:function(e,t){},506:function(e,t){},507:function(e,t){},532:function(e,t){},534:function(e,t){},548:function(e,t){},550:function(e,t){},564:function(e,t){},583:function(e,t){},585:function(e,t){},597:function(e,t){},604:function(e,t){},605:function(e,t){},607:function(e,t){},614:function(e,t){},621:function(e,t){},629:function(e,t){},636:function(e,t){},682:function(e,t){},712:function(e,t){},718:function(e,t){},719:function(e,t){},739:function(e,t){},746:function(e,t){},753:function(e,t){},833:function(e,t){},839:function(e,t,n){},849:function(e,t){},878:function(e,t){}},[[1016,1,2]]]);
//# sourceMappingURL=main.8b016803.chunk.js.map